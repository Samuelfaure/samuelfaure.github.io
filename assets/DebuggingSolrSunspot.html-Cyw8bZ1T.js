import{_ as r,c as o,a as t,o as l}from"./app-DXDllTzl.js";const n={};function a(s,e){return l(),o("div",null,e[0]||(e[0]=[t('<h1 id="ðŸ’Ž-debugging-classic-solr-sunspot-issues-like-a-pro" tabindex="-1"><a class="header-anchor" href="#ðŸ’Ž-debugging-classic-solr-sunspot-issues-like-a-pro"><span>ðŸ’Ž Debugging classic Solr Sunspot issues like a pro</span></a></h1><p>Solr is <em>awesome</em> and Sunspot is a cool wrapper for it. But troubleshooting is <em>hard</em>. Here are the main issues and how to fix them :</p><h2 id="halp-solr-returns-no-results" tabindex="-1"><a class="header-anchor" href="#halp-solr-returns-no-results"><span>Halp, Solr returns no results !</span></a></h2><p>Did you build your index ? Try <code>RAILS_ENV=your_env bundle exec rake sunspot:solr:reindex</code>. Server should be started for this operation. Always put RAILS_ENV at the beginning of the command.</p><h2 id="halp-i-have-error-500-rsolr-error-connectionrefused" tabindex="-1"><a class="header-anchor" href="#halp-i-have-error-500-rsolr-error-connectionrefused"><span>Halp, I have error 500 - RSolr::Error::ConnectionRefused !</span></a></h2><p>Did you wait long enough for Solr to initialize ? Usually, 3 seconds after running <code>rake sunspot:solr:start</code> is enough, but if you&#39;re working on a VM like travis-ci or circle-ci, it might be slower. I put a <code>sleep:30</code> command after launching Solr, which slows down my build 30 seconds but then Solr have enough time to launch.</p><p>This might also be a problem of conflicts between different Solr servers. Try killing your Solr processes and launch it again. Sometimes the java VM stays active, you might need to kill it too.</p><p>If it still doesn&#39;t work and you have a write.lock file in your index, try deleting it.</p><h2 id="halp-i-have-error-503-rsolr-error-connectionrefused" tabindex="-1"><a class="header-anchor" href="#halp-i-have-error-503-rsolr-error-connectionrefused"><span>Halp, I have error 503 - RSolr::Error::ConnectionRefused !</span></a></h2><p>Did you start your server ?</p><p>No, really, did you ? Sunspot might tell you it is launched, but it is sometimes a lie. To know if it launched, you can run <code>RAILS_ENV=your_env bundle exec rake sunspot:solr:run</code>. This should launch it in the shell, so you will see if it crashes or not. Or, just run <code>RAILS_ENV=your_env bundle exec rake sunspot:solr:start</code>. If it tells you that it launched correctly the second time, then it isn&#39;t launching correctly at all.</p><h2 id="halp-i-have-error-404-rsolr-error-http-404-not-found" tabindex="-1"><a class="header-anchor" href="#halp-i-have-error-404-rsolr-error-http-404-not-found"><span>Halp, I have error 404 - RSolr::Error::Http - 404 Not Found !</span></a></h2><p>Usually, this is due to files missing. Check your /solr/ folder, in Rails root. Check if you do have the <code>solr/your_env/core.properties</code> file as well as the <code>solr/your_env/data</code> folder. More importantly, check they are correctly copied wherever you are running your Solr.</p><h2 id="halp-nothing-worked" tabindex="-1"><a class="header-anchor" href="#halp-nothing-worked"><span>Halp, nothing worked !</span></a></h2><p>The solution that works 90% of the time is a good ol&#39; kill-and-restart. Get the PID with <code>ps aux | grep solr</code> then <code>kill PID</code>. Relaunching the server with <code>RAILS_ENV=your_env bundle exec rake sunspot:solr:start</code> is usually enough. As said before, the java VM might still be active, you might need to kill it too, but it will show when you run <code>ps aux | grep solr</code>.</p><p>One last thing : if you&#39;re allocating a fixed memory size to Solr, this might be the issue. Try different values. Allocating too much memory might cause some trouble.</p><p>Hope it worked for you ! If I saved your ass, feel free to send me a thank-you note at <a href="mailto:samuel.faure.dev@gmail.com" target="_blank" rel="noopener noreferrer">samuel.faure.dev@gmail.com</a></p>',17)]))}const u=r(n,[["render",a],["__file","DebuggingSolrSunspot.html.vue"]]),h=JSON.parse('{"path":"/tutorials/DebuggingSolrSunspot.html","title":"ðŸ’Ž Debugging Solr Sunspot like a pro","lang":"en-US","frontmatter":{"title":"ðŸ’Ž Debugging Solr Sunspot like a pro","description":"Fix that bug, SOlve that 404, 500, 503 and more","footer":"CC-BY-4.0 Licensed | Copyright Â© 2018-present by Samuel Faure <3"},"headers":[{"level":2,"title":"Halp, Solr returns no results !","slug":"halp-solr-returns-no-results","link":"#halp-solr-returns-no-results","children":[]},{"level":2,"title":"Halp, I have error 500 - RSolr::Error::ConnectionRefused !","slug":"halp-i-have-error-500-rsolr-error-connectionrefused","link":"#halp-i-have-error-500-rsolr-error-connectionrefused","children":[]},{"level":2,"title":"Halp, I have error 503 - RSolr::Error::ConnectionRefused !","slug":"halp-i-have-error-503-rsolr-error-connectionrefused","link":"#halp-i-have-error-503-rsolr-error-connectionrefused","children":[]},{"level":2,"title":"Halp, I have error 404 - RSolr::Error::Http - 404 Not Found !","slug":"halp-i-have-error-404-rsolr-error-http-404-not-found","link":"#halp-i-have-error-404-rsolr-error-http-404-not-found","children":[]},{"level":2,"title":"Halp, nothing worked !","slug":"halp-nothing-worked","link":"#halp-nothing-worked","children":[]}],"git":{"updatedTime":1716443511000,"contributors":[{"name":"Samuelfaure","email":"samuel.faure.dev@gmail.com","commits":2}]},"filePathRelative":"tutorials/DebuggingSolrSunspot.md"}');export{u as comp,h as data};
